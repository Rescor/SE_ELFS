##############################################################################
#                                                                            #
# IAR ARM ANSI C/C++ Compiler V4.42A/W32 EVALUATION    10/Jun/2013  23:07:54 #
# Copyright 1999-2005 IAR Systems. All rights reserved.                      #
#                                                                            #
#    Cpu mode        =  interwork                                            #
#    Endian          =  little                                               #
#    Stack alignment =  4                                                    #
#    Source file     =  Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\gui. #
#                       c                                                    #
#    Command line    =  Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\gui. #
#                       c -D NDEBUG -D LANG_EN -D OLDFUNCTIONS -lC           #
#                       Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\Rele #
#                       ase_EN\List\ -lA Z:\home\perk11\www\perk11.info\svn\ #
#                       SE\Tamagochi\Release_EN\List\ -o                     #
#                       Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\Rele #
#                       ase_EN\Obj\ -s9 --no_unroll --no_inline --cpu_mode   #
#                       arm --endian little --cpu ARM926EJ-S --stack_align   #
#                       4 --interwork -e --enable_multibytes --fpu None      #
#                       --eec++ --dlib_config Z:\home\perk11\IAR2\arm\LIB\dl #
#                       5tpainl8n.h -I Z:\home\perk11\IAR2\arm\INC\          #
#    List file       =  Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\Rele #
#                       ase_EN\List\gui.lst                                  #
#    Object file     =  Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\Rele #
#                       ase_EN\Obj\gui.r79                                   #
#                                                                            #
#                                                                            #
##############################################################################

Z:\home\perk11\www\perk11.info\svn\SE\Tamagochi\gui.c
      1          #include "..\\include\Lib_Clara.h"
      2          #include "..\\include\Dir.h"
      3          #include "..\\include\cfg_items.h"
      4          #include "conf_loader.h"
      5          #include "Tamagochi.h"
      6          #include "language.h"
      7          #include "misc_util.h"
      8          
      9          #define MENU_ITEMS_COUNT 10
     10          
     11          int ActiveTAB = 0;
     12          int ActivePOS = 0;
     13          

   \                                 In segment CODE, align 4, keep-with-next
     14          void EditConfig(int indx, BOOK * book, int snd)
     15          {
     16            FSTAT _fstat;
     17            wchar_t path[256];
     18            wchar_t name[64];
     19          
     20            extractdir(path, name, BCFGEDIT_PATH);
   \                     ??EditConfig:
   \   00000000   0C219FE5           LDR      R2,??EditConfig_1+0x4  ;; BCFGEDIT_PATH
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   A7DF4DE2           SUB      SP,SP,#+668
   \   0000000C   871F8DE2           ADD      R1,SP,#+540
   \   00000010   1C008DE2           ADD      R0,SP,#+28
   \   00000014   ........           _BLF     ??extractdir,??extractdir??rA
     21          
     22            if(fstat(path,name,&_fstat)==0)
   \   00000018   0D20A0E1           MOV      R2,SP
   \   0000001C   871F8DE2           ADD      R1,SP,#+540
   \   00000020   1C008DE2           ADD      R0,SP,#+28
   \   00000024   1C0100EF           SWI      +284
   \   00000028   000050E3           CMP      R0,#+0
   \   0000002C   2800000A           BEQ      ??EditConfig_2
     23            {
     24            }
     25            else if(fstat(GetDir(DIR_ELFS|MEM_INTERNAL),name,&_fstat)==0)
   \   00000030   1100A0E3           MOV      R0,#+17
   \   00000034   050100EF           SWI      +261
   \   00000038   0D20A0E1           MOV      R2,SP
   \   0000003C   871F8DE2           ADD      R1,SP,#+540
   \   00000040   1C0100EF           SWI      +284
   \   00000044   000050E3           CMP      R0,#+0
   \   00000048   0500001A           BNE      ??EditConfig_3
     26            {
     27              wstrcpy(path,GetDir(DIR_ELFS|MEM_INTERNAL));
   \   0000004C   1100A0E3           MOV      R0,#+17
   \                     ??EditConfig_4:
   \   00000050   050100EF           SWI      +261
   \   00000054   0010A0E1           MOV      R1,R0
   \   00000058   1C008DE2           ADD      R0,SP,#+28
   \   0000005C   520100EF           SWI      +338
   \   00000060   1B0000EA           B        ??EditConfig_2
     28            }
     29            else if(fstat(GetDir(DIR_ELFS|MEM_EXTERNAL),name,&_fstat)==0)
   \                     ??EditConfig_3:
   \   00000064   1000A0E3           MOV      R0,#+16
   \   00000068   050100EF           SWI      +261
   \   0000006C   0D20A0E1           MOV      R2,SP
   \   00000070   871F8DE2           ADD      R1,SP,#+540
   \   00000074   1C0100EF           SWI      +284
   \   00000078   000050E3           CMP      R0,#+0
     30            {
     31              wstrcpy(path,GetDir(DIR_ELFS|MEM_EXTERNAL));
   \   0000007C   1000A003           MOVEQ    R0,#+16
   \   00000080   F2FFFF0A           BEQ      ??EditConfig_4
     32            }
     33            else
     34            {
     35              MessageBox(EMPTY_TEXTID, TextID_Create(LG_GFGBCFGEDITNOTFOUND,ENC_UCS2,TEXTID_ANY_LEN), NOIMAGE, 1, 5000*msgShowTime, 0);
   \   00000084   8C009FE5           LDR      R0,??EditConfig_1+0x8  ;; `?<Constant "BcfgEdit.elf not found!">`
   \   00000088   FF40A0E3           MOV      R4,#+255
   \   0000008C   FF4C84E3           ORR      R4,R4,#0xFF00
   \   00000090   0420A0E1           MOV      R2,R4
   \   00000094   0010A0E3           MOV      R1,#+0
   \   00000098   5D0100EF           SWI      +349
   \   0000009C   0010A0E3           MOV      R1,#+0
   \   000000A0   02002DE9           PUSH     {R1}
   \   000000A4   ........           LDR      R1,??DataTable2  ;; msgShowTime
   \   000000A8   8820A0E3           MOV      R2,#+136
   \   000000AC   001091E5           LDR      R1,[R1, #+0]
   \   000000B0   4C2D82E3           ORR      R2,R2,#0x1300
   \   000000B4   920101E0           MUL      R1,R2,R1
   \   000000B8   0130A0E3           MOV      R3,#+1
   \   000000BC   02002DE9           PUSH     {R1}
   \   000000C0   0420A0E1           MOV      R2,R4
   \   000000C4   0010A0E1           MOV      R1,R0
   \   000000C8   9004E0E3           MVN      R0,#-1879048192
   \   000000CC   570200EF           SWI      +599
   \   000000D0   08D08DE2           ADD      SP,SP,#+8
     36            }
     37            wstrcat(path,L"/");
   \                     ??EditConfig_2:
   \   000000D4   0D1F8FE2           ADR      R1,??EditConfig_1  ;; 0x2F, 0x00, 0x00, 0x00
   \   000000D8   1C008DE2           ADD      R0,SP,#+28
   \   000000DC   540100EF           SWI      +340
     38            wstrcat(path,name);
   \   000000E0   871F8DE2           ADD      R1,SP,#+540
   \   000000E4   1C008DE2           ADD      R0,SP,#+28
   \   000000E8   540100EF           SWI      +340
     39            elfload(path,(void*)successed_config_path,(void*)successed_config_name,0);
   \   000000EC   28009FE5           LDR      R0,??EditConfig_1+0xC  ;; successed_config_name
   \   000000F0   0030A0E3           MOV      R3,#+0
   \   000000F4   002090E5           LDR      R2,[R0, #+0]
   \   000000F8   20009FE5           LDR      R0,??EditConfig_1+0x10  ;; successed_config_path
   \   000000FC   001090E5           LDR      R1,[R0, #+0]
   \   00000100   1C008DE2           ADD      R0,SP,#+28
   \   00000104   0D0100EF           SWI      +269
     40          }
   \   00000108   A7DF8DE2           ADD      SP,SP,#+668
   \   0000010C   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??EditConfig_1:
   \   00000110   2F000000           DC8      0x2F, 0x00, 0x00, 0x00
   \   00000114   ........           DC32     BCFGEDIT_PATH
   \   00000118   ........           DC32     `?<Constant "BcfgEdit.elf not found!">`
   \   0000011C   ........           DC32     successed_config_name
   \   00000120   ........           DC32     successed_config_path
     41          

   \                                 In segment DATA_Z, align 4, align-sorted
     42          int  CountAbout=0;
   \                     CountAbout:
   \   00000000                      DS8 4
     43          

   \                                 In segment CODE, align 4, keep-with-next
     44          int isAnyDeath()
     45          {
     46            for(int i=0; i<Pets[0].Status.Count; i++)
   \                     ??isAnyDeath:
   \   00000000   ........           LDR      R1,??DataTable9  ;; Pets
   \   00000004   0000A0E3           MOV      R0,#+0
   \   00000008   C42091E5           LDR      R2,[R1, #+196]
   \   0000000C   000000EA           B        ??isAnyDeath_1
   \                     ??isAnyDeath_2:
   \   00000010   010080E2           ADD      R0,R0,#+1
   \                     ??isAnyDeath_1:
   \   00000014   020050E1           CMP      R0,R2
   \   00000018   060000AA           BGE      ??isAnyDeath_3
     47              if(Pets[i].Status.StatusDeath == 1) return 1;
   \   0000001C   443FA0E3           MOV      R3,#+272
   \   00000020   93102CE0           MLA      R12,R3,R0,R1
   \   00000024   38309CE5           LDR      R3,[R12, #+56]
   \   00000028   010053E3           CMP      R3,#+1
   \   0000002C   F7FFFF1A           BNE      ??isAnyDeath_2
   \   00000030   0100A0E3           MOV      R0,#+1
   \   00000034   1EFF2FE1           BX       LR
     48          
     49            return 0;
   \                     ??isAnyDeath_3:
   \   00000038   0000A0E3           MOV      R0,#+0
   \   0000003C   1EFF2FE1           BX       LR               ;; return
     50          }
     51          

   \                                 In segment CODE, align 4, keep-with-next
     52          static void AboutDlg(int indx, BOOK * book, int snd)
     53          {
     54          #if (!defined(LANG_RU) && !defined(LANG_EN))
     55            MessageBox(EMPTY_TEXTID,TextID_Create( LELFNAME _T("\n") LELFVERSION _T("\n") LAUTHORINFO _T("\n") LTRANSLATED TRANSLATED_BY,0,TEXTID_ANY_LEN), NOIMAGE, 1, 5000*msgShowTime, 0);
     56          #else
     57            MessageBox(EMPTY_TEXTID,TextID_Create( LELFNAME _T("\n") LELFVERSION _T("\n") LAUTHORINFO,ENC_UCS2,TEXTID_ANY_LEN), NOIMAGE, 1, 5000*msgShowTime, 0);
   \                     ??AboutDlg:
   \   00000000   4C009FE5           LDR      R0,??AboutDlg_1  ;; `?<Constant L"\\x54\\x61\\x6d\\x61\\x67\\x6f\\x63\\x68\\`
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   0010A0E3           MOV      R1,#+0
   \   0000000C   FF40A0E3           MOV      R4,#+255
   \   00000010   FF4C84E3           ORR      R4,R4,#0xFF00
   \   00000014   0420A0E1           MOV      R2,R4
   \   00000018   5D0100EF           SWI      +349
   \   0000001C   0010A0E3           MOV      R1,#+0
   \   00000020   02002DE9           PUSH     {R1}
   \   00000024   ........           LDR      R1,??DataTable2  ;; msgShowTime
   \   00000028   8820A0E3           MOV      R2,#+136
   \   0000002C   001091E5           LDR      R1,[R1, #+0]
   \   00000030   4C2D82E3           ORR      R2,R2,#0x1300
   \   00000034   920101E0           MUL      R1,R2,R1
   \   00000038   0130A0E3           MOV      R3,#+1
   \   0000003C   02002DE9           PUSH     {R1}
   \   00000040   0420A0E1           MOV      R2,R4
   \   00000044   0010A0E1           MOV      R1,R0
   \   00000048   9004E0E3           MVN      R0,#-1879048192
   \   0000004C   570200EF           SWI      +599
     58          #endif
     59          }
   \   00000050   1380BDE8           POP      {R0,R1,R4,PC}    ;; return
   \                     ??AboutDlg_1:
   \   00000054   ........           DC32     `?<Constant L"\\x54\\x61\\x6d\\x61\\x67\\x6f\\x63\\x68\\`
     60          

   \                                 In segment CODE, align 4, keep-with-next
     61          void RoomCommand(int indx, BOOK * book, int snd)
     62          {
     63            wchar_t eat_path[256];
     64            getdir(eat_path, ROOM_PATH);
   \                     ??RoomCommand:
   \   00000000   A4109FE5           LDR      R1,??RoomCommand_1  ;; ROOM_PATH
   \   00000004   10402DE9           PUSH     {R4,LR}
   \   00000008   82DF4DE2           SUB      SP,SP,#+520
   \   0000000C   08008DE2           ADD      R0,SP,#+8
   \   00000010   ........           _BLF     ??getdir,??getdir??rA
     65            const wchar_t * folder_list[2];
     66            folder_list[0]=eat_path;
   \   00000014   08108DE2           ADD      R1,SP,#+8
   \   00000018   00108DE5           STR      R1,[SP, #+0]
     67            folder_list[1]= 0;
   \   0000001C   0010A0E3           MOV      R1,#+0
   \   00000020   04108DE5           STR      R1,[SP, #+4]
     68            int folders_cnt = 1;
     69          
     70            void * DB_Desc=DataBrowserDesc_Create();
   \   00000024   1F0100EF           SWI      +287
   \   00000028   0040A0E1           MOV      R4,R0
     71            DataBrowserDesc_SetHeaderText(DB_Desc,TextID_Create(LG_ROOM,ENC_UCS2,TEXTID_ANY_LEN));
   \   0000002C   7C009FE5           LDR      R0,??RoomCommand_1+0x4  ;; `?<Constant L"\\x52\\x6f\\x6f\\x6d\\x20\\x77\\x69\\x74\\`
   \   00000030   FF20A0E3           MOV      R2,#+255
   \   00000034   FF2C82E3           ORR      R2,R2,#0xFF00
   \   00000038   0010A0E3           MOV      R1,#+0
   \   0000003C   5D0100EF           SWI      +349
   \   00000040   0010A0E1           MOV      R1,R0
   \   00000044   0400A0E1           MOV      R0,R4
   \   00000048   210100EF           SWI      +289
     72            DataBrowserDesc_SetFolders(DB_Desc,folder_list);
   \   0000004C   0D10A0E1           MOV      R1,SP
   \   00000050   0400A0E1           MOV      R0,R4
   \   00000054   220100EF           SWI      +290
     73            DataBrowserDesc_SetFoldersNumber(DB_Desc,folders_cnt);
   \   00000058   0110A0E3           MOV      R1,#+1
   \   0000005C   0400A0E1           MOV      R0,R4
   \   00000060   A90200EF           SWI      +681
     74            DataBrowserDesc_SetSelectAction(DB_Desc,0);
   \   00000064   0010A0E3           MOV      R1,#+0
   \   00000068   0400A0E1           MOV      R0,R4
   \   0000006C   AB0200EF           SWI      +683
     75            DataBrowserDesc_Menu_AddFSFunctions(DB_Desc, 0);
   \   00000070   0010A0E3           MOV      R1,#+0
   \   00000074   0400A0E1           MOV      R0,R4
   \   00000078   1E0300EF           SWI      +798
     76            DataBrowserDesc_Menu_AddNewFolder(DB_Desc, 1);
   \   0000007C   0110A0E3           MOV      R1,#+1
   \   00000080   0400A0E1           MOV      R0,R4
   \   00000084   1F0300EF           SWI      +799
     77            DataBrowserDesc_Menu_AddMarkFiles(DB_Desc, 1);
   \   00000088   0110A0E3           MOV      R1,#+1
   \   0000008C   0400A0E1           MOV      R0,R4
   \   00000090   200300EF           SWI      +800
     78            DataBrowser_Create(DB_Desc);
   \   00000094   0400A0E1           MOV      R0,R4
   \   00000098   240100EF           SWI      +292
     79            DataBrowserDesc_Destroy(DB_Desc);
   \   0000009C   0400A0E1           MOV      R0,R4
   \   000000A0   250100EF           SWI      +293
     80          
     81          }
   \   000000A4   82DF8DE2           ADD      SP,SP,#+520
   \   000000A8   1080BDE8           POP      {R4,PC}          ;; return
   \                     ??RoomCommand_1:
   \   000000AC   ........           DC32     ROOM_PATH
   \   000000B0   ........           DC32     `?<Constant L"\\x52\\x6f\\x6f\\x6d\\x20\\x77\\x69\\x74\\`
     82          
     83          enum MENU_CMD {
     84            PLAY_CMD,
     85            VACCINATE_CMD,
     86            DISCIPLINE_CMD,
     87            SLEEP_CMD,
     88            BATHE_CMD,
     89            ROOM_CMD,
     90            STATUS_CMD,
     91            NAME_CMD,
     92            SETTINGS_CMD,
     93            ABOUT_CMD
     94          };
     95          

   \                                 In segment DATA_C, align 4, align-sorted
     96          static int const menuiconsnum[MENU_ITEMS_COUNT]=
   \                     menuiconsnum:
   \   00000000   000000000100       DC32 0, 1, 2, 3, 20, 21, 4, 5, 6, 7
   \              000002000000
   \              030000001400
   \              000015000000
   \              040000000500
   \              000006000000
   \              07000000    
   \   00000028   ........           DC32 `?<Constant L"\\x47\\x61\\x6d\\x65">`
   \   0000002C   ........           DC32 `?<Constant L"\\x56\\x61\\x63\\x63\\x69\\x6e\\x61\\x74\\`
   \   00000030   ........           DC32 `?<Constant L"\\x44\\x69\\x73\\x63\\x69\\x70\\x6c\\x69\\`
   \   00000034   ........           DC32 `?<Constant L"\\x53\\x6c\\x65\\x65\\x70">`
   \   00000038   ........           DC32 `?<Constant L"\\x42\\x61\\x74\\x68\\x65">`
   \   0000003C   ........           DC32 `?<Constant L"\\x52\\x6f\\x6f\\x6d\\x20\\x77\\x69\\x74\\`
   \   00000040   ........           DC32 `?<Constant L"\\x53\\x74\\x61\\x74\\x75\\x73">`
   \   00000044   ........           DC32 `?<Constant L"\\x43\\x68\\x61\\x6e\\x67\\x65\\x20\\x6e\\`
   \   00000048   ........           DC32 `?<Constant L"\\x53\\x65\\x74\\x74\\x69\\x6e\\x67">`
   \   0000004C   ........           DC32 `?<Constant L"\\x41\\x62\\x6f\\x75\\x74">`
   \                     `?<Constant L"\\x53\\x6c\\x65\\x65\\x70">`:
   \   00000050   53006C006500       DC8 53H, 0, 6CH, 0, 65H, 0, 65H, 0
   \              6500        
   \   00000058   70000000           DC8 70H, 0, 0, 0
   \   0000005C   570061006B00       DC8 57H, 0, 61H, 0, 6BH, 0, 65H, 0
   \              6500        
   \   00000064   750070000000       DC8 75H, 0, 70H, 0, 0, 0
   \   0000006A   0000               DC8 0, 0

   \                                 In segment DATA_I, align 4, align-sorted
   \                     ActiveTAB:
   \   00000000                      DS8 4
   \   00000004                      REQUIRE `?<Initializer for ActiveTAB>`
   \                     ActivePOS:
   \   00000004                      DS8 4
   \   00000008                      REQUIRE `?<Initializer for ActivePOS>`
   \   00000008                      DS8 40
   \   00000030                      REQUIRE `?<Initializer for menuprocs>`
     97          {
     98            PLAY_ICN,
     99            VACCINATE_ICN,
    100            DISCIPLINE_ICN,
    101            SLEEP_ICN,
    102            SM_BATHE_ICN,
    103            ROOM_ICN,
    104            STATUS_ICN,
    105            NAME_ICN,
    106            SETTINGS_ICN,
    107            ABOUT_ICN
    108          };
    109          
    110          static const wchar_t * const menutexts[MENU_ITEMS_COUNT]=
    111          {
    112            LG_GAMEPLAY,
    113            LG_VACCINATE,
    114            LG_DISCIPLINE,
    115            LG_SLEEP,
    116            LG_BATHE,
    117            LG_ROOM,
    118            LG_STATUS,
    119            LG_NAME,
    120            LG_EDCFG,
    121            LG_ABOUT
    122          };
    123          
    124          static void (*menuprocs[MENU_ITEMS_COUNT])(int, BOOK *, int) =
    125          {
    126            GamePlay,
    127            Vaccinate,
    128            Discipline,
    129            SleepCommand,
    130            BatheCommand,
    131            RoomCommand,
    132            InfoStatus,
    133            ChangeName,
    134            EditConfig,
    135            AboutDlg,
    136          };
    137          

   \                                 In segment CODE, align 4, keep-with-next
    138          int menu_list_callback(GUI_MESSAGE * msg)
    139          {
   \                     ??menu_list_callback:
   \   00000000   70402DE9           PUSH     {R4-R6,LR}
   \   00000004   0CD04DE2           SUB      SP,SP,#+12
   \   00000008   0040A0E1           MOV      R4,R0
    140            int str_id;
    141            int icon_id;
    142            switch( GUIonMessage_GetMsg(msg) )
   \   0000000C   740300EF           SWI      +884
   \   00000010   010050E3           CMP      R0,#+1
   \   00000014   2900001A           BNE      ??menu_list_callback_1
    143            {
    144            case 1:
    145              int curitem=GUIonMessage_GetCreatedItemIndex(msg);
   \   00000018   0400A0E1           MOV      R0,R4
   \   0000001C   370100EF           SWI      +311
   \   00000020   0060A0E1           MOV      R6,R0
    146          //    MyBOOK * bk = (MyBOOK *)msg->book;
    147              MyBOOK * bk = (MyBOOK *) FindBook(isTamagochiBook);
   \   00000024   ........           LDR      R0,??DataTable6  ;; ??isTamagochiBook
   \   00000028   300100EF           SWI      +304
    148              int indx = TabMenuBar_GetFocusedTab(bk->gui);
   \   0000002C   280090E5           LDR      R0,[R0, #+40]
   \   00000030   5D0200EF           SWI      +605
    149              icon_id = img_menu[menuiconsnum[curitem]];
   \   00000034   8C309FE5           LDR      R3,??menu_list_callback_2  ;; menuiconsnum
   \   00000038   ........           LDR      R2,??DataTable10  ;; img_menu
   \   0000003C   061193E7           LDR      R1,[R3, +R6, LSL #+2]
    150              if (curitem!= SLEEP_CMD){
   \   00000040   030056E3           CMP      R6,#+3
   \   00000044   811082E0           ADD      R1,R2,R1, LSL #+1
   \   00000048   B050D1E1           LDRH     R5,[R1, #+0]
   \   0000004C   FF20A0E3           MOV      R2,#+255
   \   00000050   FF2C82E3           ORR      R2,R2,#0xFF00
   \   00000054   0300000A           BEQ      ??menu_list_callback_3
    151                str_id  = TextID_Create(menutexts[curitem],ENC_UCS2,TEXTID_ANY_LEN);
   \   00000058   0010A0E3           MOV      R1,#+0
   \   0000005C   060183E0           ADD      R0,R3,R6, LSL #+2
   \   00000060   280090E5           LDR      R0,[R0, #+40]
   \   00000064   070000EA           B        ??menu_list_callback_4
    152              }
    153              else
    154              {
    155                if (Pets[indx].Sleep==0){
   \                     ??menu_list_callback_3:
   \   00000068   ........           LDR      R6,??DataTable9  ;; Pets
   \   0000006C   441FA0E3           MOV      R1,#+272
   \   00000070   916020E0           MLA      R0,R1,R0,R6
   \   00000074   0010A0E3           MOV      R1,#+0
   \   00000078   DC0090E5           LDR      R0,[R0, #+220]
   \   0000007C   000050E3           CMP      R0,#+0
    156                  str_id  = TextID_Create(LG_SLEEP,ENC_UCS2,TEXTID_ANY_LEN);
   \   00000080   50008302           ADDEQ    R0,R3,#+80
    157                }
    158                else
    159                {
    160                  str_id  = TextID_Create(LG_NOTSLEEP,ENC_UCS2,TEXTID_ANY_LEN);
   \   00000084   5C008312           ADDNE    R0,R3,#+92
   \                     ??menu_list_callback_4:
   \   00000088   5D0100EF           SWI      +349
    161                }
    162              }
    163              int strID_array[3];
    164              strID_array[0]=icon_id+0x78000000;
   \   0000008C   782485E2           ADD      R2,R5,#+2013265920
   \   00000090   00208DE5           STR      R2,[SP, #+0]
    165              strID_array[1]=0x78000020;
   \   00000094   2020A0E3           MOV      R2,#+32
   \   00000098   782482E3           ORR      R2,R2,#0x78000000
   \   0000009C   04208DE5           STR      R2,[SP, #+4]
    166              strID_array[2]=str_id;
   \   000000A0   08008DE5           STR      R0,[SP, #+8]
    167              GUIonMessage_SetMenuItemText(msg,TextID_Create(strID_array,ENC_TEXTID,3));
   \   000000A4   0320A0E3           MOV      R2,#+3
   \   000000A8   0510A0E3           MOV      R1,#+5
   \   000000AC   0D00A0E1           MOV      R0,SP
   \   000000B0   5D0100EF           SWI      +349
   \   000000B4   0010A0E1           MOV      R1,R0
   \   000000B8   0400A0E1           MOV      R0,R4
   \   000000BC   380100EF           SWI      +312
    168            }
    169            return(1);
   \                     ??menu_list_callback_1:
   \   000000C0   0100A0E3           MOV      R0,#+1
   \   000000C4   7E80BDE8           POP      {R1-R6,PC}       ;; return
   \                     ??menu_list_callback_2:
   \   000000C8   ........           DC32     menuiconsnum
    170          }
    171          

   \                                 In segment CODE, align 4, keep-with-next
    172          void DestroyMenuList( BOOK* book, GUI* )
    173          {
    174            BookObj_ReturnPage(book,ACCEPT_EVENT);
   \                     ??DestroyMenuList:
   \   00000000   0C109FE5           LDR      R1,??DestroyMenuList_1  ;; ACCEPT_EVENT
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   001091E5           LDR      R1,[R1, #+0]
   \   0000000C   2E0100EF           SWI      +302
    175          }
   \   00000010   0080BDE8           POP      {PC}             ;; return
   \                     ??DestroyMenuList_1:
   \   00000014   ........           DC32     ACCEPT_EVENT
    176          

   \                                 In segment CODE, align 4, keep-with-next
    177          void CancelMenuList( BOOK* book, GUI* )
    178          {
   \                     ??CancelMenuList:
   \   00000000   30402DE9           PUSH     {R4,R5,LR}
   \   00000004   0040A0E1           MOV      R4,R0
    179            BookObj_ReturnPage(book,NIL_EVENT);
   \   00000008   1C009FE5           LDR      R0,??CancelMenuList_1  ;; NIL_EVENT
   \   0000000C   005090E5           LDR      R5,[R0, #+0]
   \   00000010   0400A0E1           MOV      R0,R4
   \   00000014   0510A0E1           MOV      R1,R5
   \   00000018   2E0100EF           SWI      +302
    180            BookObj_ReturnPage(book,NIL_EVENT);
   \   0000001C   0510A0E1           MOV      R1,R5
   \   00000020   0400A0E1           MOV      R0,R4
   \   00000024   2E0100EF           SWI      +302
    181          }
   \   00000028   3080BDE8           POP      {R4,R5,PC}       ;; return
   \                     ??CancelMenuList_1:
   \   0000002C   ........           DC32     NIL_EVENT
    182          

   \                                 In segment CODE, align 4, keep-with-next
    183          void Menu_onEnter( BOOK* book, GUI* )
    184          {
   \                     ??Menu_onEnter:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
    185            MyBOOK * bk = (MyBOOK *)book;
    186            int indx = TabMenuBar_GetFocusedTab(bk->gui);
    187            int item_num = ActivePOS = ListMenu_GetSelectedItem(bk->menu_list[indx]);
   \   00000004   6C709FE5           LDR      R7,??Menu_onEnter_1  ;; ActiveTAB
   \   00000008   0040A0E1           MOV      R4,R0
   \   0000000C   280094E5           LDR      R0,[R4, #+40]
   \   00000010   5D0200EF           SWI      +605
   \   00000014   0050A0E1           MOV      R5,R0
   \   00000018   050184E0           ADD      R0,R4,R5, LSL #+2
   \   0000001C   2C0090E5           LDR      R0,[R0, #+44]
   \   00000020   3E0100EF           SWI      +318
   \   00000024   0060A0E1           MOV      R6,R0
   \   00000028   046087E5           STR      R6,[R7, #+4]
    188            menuprocs[item_num](indx, book,(!GetSilent() || sndOnSilent) && sndEnable);
   \   0000002C   4B0200EF           SWI      +587
   \   00000030   000050E3           CMP      R0,#+0
   \   00000034   0300000A           BEQ      ??Menu_onEnter_2
   \   00000038   3C009FE5           LDR      R0,??Menu_onEnter_1+0x4  ;; sndOnSilent
   \   0000003C   000090E5           LDR      R0,[R0, #+0]
   \   00000040   000050E3           CMP      R0,#+0
   \   00000044   0400000A           BEQ      ??Menu_onEnter_3
   \                     ??Menu_onEnter_2:
   \   00000048   30009FE5           LDR      R0,??Menu_onEnter_1+0x8  ;; sndEnable
   \   0000004C   000090E5           LDR      R0,[R0, #+0]
   \   00000050   000050E3           CMP      R0,#+0
   \   00000054   0120A013           MOVNE    R2,#+1
   \   00000058   0000001A           BNE      ??Menu_onEnter_4
   \                     ??Menu_onEnter_3:
   \   0000005C   0020A0E3           MOV      R2,#+0
   \                     ??Menu_onEnter_4:
   \   00000060   0410A0E1           MOV      R1,R4
   \   00000064   0500A0E1           MOV      R0,R5
   \   00000068   063187E0           ADD      R3,R7,R6, LSL #+2
   \   0000006C   083093E5           LDR      R3,[R3, #+8]
   \   00000070   33FF2FE1           BLX      R3
    189            //BookObj_ReturnPage(book,ACCEPT_EVENT);
    190          }
   \   00000074   F080BDE8           POP      {R4-R7,PC}       ;; return
   \                     ??Menu_onEnter_1:
   \   00000078   ........           DC32     ActiveTAB
   \   0000007C   ........           DC32     sndOnSilent
   \   00000080   ........           DC32     sndEnable
    191          

   \                                 In segment CODE, align 4, keep-with-next
    192          void Menu_OnKey(DISP_OBJ* p, int i1, int i2, int i3, int i4)
    193          {
   \                     ??Menu_OnKey:
   \   00000000   F0472DE9           PUSH     {R4-R10,LR}
   \   00000004   20A09DE5           LDR      R10,[SP, #+32]
   \   00000008   0050A0E1           MOV      R5,R0
    194            MyBOOK * bk = (MyBOOK *) FindBook(isTamagochiBook);
   \   0000000C   ........           LDR      R0,??DataTable6  ;; ??isTamagochiBook
   \   00000010   0160A0E1           MOV      R6,R1
   \   00000014   0270A0E1           MOV      R7,R2
   \   00000018   0380A0E1           MOV      R8,R3
   \   0000001C   300100EF           SWI      +304
   \   00000020   0090A0E1           MOV      R9,R0
    195            int indx = TabMenuBar_GetFocusedTab(bk->gui);
   \   00000024   280099E5           LDR      R0,[R9, #+40]
   \   00000028   5D0200EF           SWI      +605
    196            bk->Menu_oldOnKey[indx](p,i1,i2,i3,i4);
   \   0000002C   004189E0           ADD      R4,R9,R0, LSL #+2
   \   00000030   0A00A0E1           MOV      R0,R10
   \   00000034   01002DE9           PUSH     {R0}
   \   00000038   0830A0E1           MOV      R3,R8
   \   0000003C   0720A0E1           MOV      R2,R7
   \   00000040   0610A0E1           MOV      R1,R6
   \   00000044   0500A0E1           MOV      R0,R5
   \   00000048   AC5094E5           LDR      R5,[R4, #+172]
   \   0000004C   35FF2FE1           BLX      R5
    197            if(i4==KBD_SHORT_RELEASE)
   \   00000050   84009FE5           LDR      R0,??Menu_OnKey_1  ;; KBD_SHORT_RELEASE
   \   00000054   000090E5           LDR      R0,[R0, #+0]
   \   00000058   04D08DE2           ADD      SP,SP,#+4
   \   0000005C   00005AE1           CMP      R10,R0
   \   00000060   F087BD18           POPNE    {R4-R10,PC}
    198            {
    199              int num = i1 - KEY_DIGITAL_0;
   \   00000064   74009FE5           LDR      R0,??Menu_OnKey_1+0x4  ;; KEY_DIGITAL_0
   \   00000068   000090E5           LDR      R0,[R0, #+0]
   \   0000006C   000046E0           SUB      R0,R6,R0
    200              if(num == 2)
   \   00000070   020050E3           CMP      R0,#+2
   \   00000074   0700001A           BNE      ??Menu_OnKey_2
    201              {
    202                int item = ListMenu_GetSelectedItem(bk->menu_list[indx]) - 1;
   \   00000078   2C0094E5           LDR      R0,[R4, #+44]
   \   0000007C   3E0100EF           SWI      +318
   \   00000080   011050E2           SUBS     R1,R0,#+1
    203                if(item < 0) item = MENU_ITEMS_COUNT - 1;
   \   00000084   0B00005A           BPL      ??Menu_OnKey_3
    204                ListMenu_SetCursorToItem(bk->menu_list[indx],item);
   \   00000088   2C0094E5           LDR      R0,[R4, #+44]
   \   0000008C   0910A0E3           MOV      R1,#+9
   \   00000090   350100EF           SWI      +309
   \   00000094   F087BDE8           POP      {R4-R10,PC}
    205              }
    206              else if((num == 8) || (num == 0))
   \                     ??Menu_OnKey_2:
   \   00000098   080050E3           CMP      R0,#+8
   \   0000009C   00005013           CMPNE    R0,#+0
   \   000000A0   0700001A           BNE      ??Menu_OnKey_4
    207              {
    208                int item = ListMenu_GetSelectedItem(bk->menu_list[indx]) + 1;
   \   000000A4   2C0094E5           LDR      R0,[R4, #+44]
   \   000000A8   3E0100EF           SWI      +318
   \   000000AC   011080E2           ADD      R1,R0,#+1
    209                if(item >= MENU_ITEMS_COUNT) item = 0;
   \   000000B0   0A0051E3           CMP      R1,#+10
   \   000000B4   0010A0A3           MOVGE    R1,#+0
    210                ListMenu_SetCursorToItem(bk->menu_list[indx],item);
   \                     ??Menu_OnKey_3:
   \   000000B8   2C0094E5           LDR      R0,[R4, #+44]
   \   000000BC   350100EF           SWI      +309
   \   000000C0   F087BDE8           POP      {R4-R10,PC}
    211              }
    212              else if(num == 5)
   \                     ??Menu_OnKey_4:
   \   000000C4   050050E3           CMP      R0,#+5
   \   000000C8   F087BD18           POPNE    {R4-R10,PC}
    213              {
    214                Menu_onEnter((BOOK*)bk,0);
   \   000000CC   0010A0E3           MOV      R1,#+0
   \   000000D0   0900A0E1           MOV      R0,R9
   \   000000D4   ........           BL       ??Menu_onEnter
    215              }
    216            }
    217          };
   \   000000D8   F087BDE8           POP      {R4-R10,PC}      ;; return
   \                     ??Menu_OnKey_1:
   \   000000DC   ........           DC32     KBD_SHORT_RELEASE
   \   000000E0   ........           DC32     KEY_DIGITAL_0
    218          

   \                                 In segment CODE, align 4, keep-with-next
    219          void onTabSwitch(BOOK * bk,int active_tab)
    220          {
    221            ActiveTAB=active_tab;
   \                     ??onTabSwitch:
   \   00000000   ........           LDR      R0,??DataTable11  ;; ActiveTAB
   \   00000004   001080E5           STR      R1,[R0, #+0]
    222          }
   \   00000008   1EFF2FE1           BX       LR               ;; return
    223          

   \                                 In segment CODE, align 4, keep-with-next
    224          int CreateMenuList(void *data, BOOK * book)
    225          {
    226            int menu_pos = ActivePOS;
   \                     ??CreateMenuList:
   \   00000000   ........           LDR      R0,??DataTable11  ;; ActiveTAB
   \   00000004   F0432DE9           PUSH     {R4-R9,LR}
    227            int tab_pos = ActiveTAB;
    228            if(tab_pos >= Pets[0].Status.Count) tab_pos = 0;
   \   00000008   ........           LDR      R7,??DataTable9  ;; Pets
   \   0000000C   045090E5           LDR      R5,[R0, #+4]
   \   00000010   006090E5           LDR      R6,[R0, #+0]
   \   00000014   C40097E5           LDR      R0,[R7, #+196]
   \   00000018   0140A0E1           MOV      R4,R1
   \   0000001C   000056E1           CMP      R6,R0
    229            if(menu_pos >= MENU_ITEMS_COUNT) menu_pos = 0;
    230            MyBOOK * bk = (MyBOOK *)book;
    231            if(bk->gui) GUIObject_Destroy( bk->gui);
   \   00000020   280094E5           LDR      R0,[R4, #+40]
   \   00000024   0060A0A3           MOVGE    R6,#+0
   \   00000028   0A0055E3           CMP      R5,#+10
   \   0000002C   0050A0A3           MOVGE    R5,#+0
   \   00000030   000050E3           CMP      R0,#+0
   \   00000034   0000000A           BEQ      ??CreateMenuList_1
   \   00000038   CE0100EF           SWI      +462
    232            FREE_GUI(bk->stat_list);
   \                     ??CreateMenuList_1:
   \   0000003C   2C0194E5           LDR      R0,[R4, #+300]
   \   00000040   000050E3           CMP      R0,#+0
   \   00000044   0200000A           BEQ      ??CreateMenuList_2
   \   00000048   CE0100EF           SWI      +462
   \   0000004C   0000A0E3           MOV      R0,#+0
   \   00000050   2C0184E5           STR      R0,[R4, #+300]
    233          
    234            bk->gui = CreateTabMenuBar(book);
   \                     ??CreateMenuList_2:
   \   00000054   0400A0E1           MOV      R0,R4
   \   00000058   CA0100EF           SWI      +458
   \   0000005C   280084E5           STR      R0,[R4, #+40]
    235            TabMenuBar_SetTabCount(bk->gui,Pets[0].Status.Count);
   \   00000060   C41097E5           LDR      R1,[R7, #+196]
    236            for(int indx=0; indx < Pets[0].Status.Count; indx++)
   \   00000064   0080A0E3           MOV      R8,#+0
   \   00000068   CB0100EF           SWI      +459
   \   0000006C   C40097E5           LDR      R0,[R7, #+196]
   \   00000070   010050E3           CMP      R0,#+1
   \   00000074   4A0000AA           BGE      ??CreateMenuList_3
   \   00000078   4C0000EA           B        ??CreateMenuList_4
    237            {
    238              if (bk->menu_list[indx]) GUIObject_Destroy( bk->menu_list[indx]);
   \                     ??CreateMenuList_5:
   \   0000007C   089184E0           ADD      R9,R4,R8, LSL #+2
   \   00000080   2C0099E5           LDR      R0,[R9, #+44]
   \   00000084   000050E3           CMP      R0,#+0
   \   00000088   0000000A           BEQ      ??CreateMenuList_6
   \   0000008C   CE0100EF           SWI      +462
    239              bk->menu_list[indx]=CreateListMenu(book,0);
   \                     ??CreateMenuList_6:
   \   00000090   0010A0E3           MOV      R1,#+0
   \   00000094   0400A0E1           MOV      R0,R4
   \   00000098   C00100EF           SWI      +448
   \   0000009C   2C0089E5           STR      R0,[R9, #+44]
    240              GUIObject_SetTitleText(bk->menu_list[indx],TextID_Create(Pets[indx].Status.name,ENC_UCS2,TEXTID_ANY_LEN));
   \   000000A0   440FA0E3           MOV      R0,#+272
   \   000000A4   907823E0           MLA      R3,R0,R8,R7
   \   000000A8   FF20A0E3           MOV      R2,#+255
   \   000000AC   FF2C82E3           ORR      R2,R2,#0xFF00
   \   000000B0   0010A0E3           MOV      R1,#+0
   \   000000B4   400083E2           ADD      R0,R3,#+64
   \   000000B8   5D0100EF           SWI      +349
   \   000000BC   0010A0E1           MOV      R1,R0
   \   000000C0   2C0099E5           LDR      R0,[R9, #+44]
   \   000000C4   330100EF           SWI      +307
    241          
    242              ListMenu_SetItemCount(bk->menu_list[indx],MENU_ITEMS_COUNT);
   \   000000C8   2C0099E5           LDR      R0,[R9, #+44]
   \   000000CC   0A10A0E3           MOV      R1,#+10
   \   000000D0   C10100EF           SWI      +449
    243              OneOfMany_SetOnMessage((GUI_ONEOFMANY*)bk->menu_list[indx],menu_list_callback);
   \   000000D4   08119FE5           LDR      R1,??CreateMenuList_7  ;; ??menu_list_callback
   \   000000D8   2C0099E5           LDR      R0,[R9, #+44]
   \   000000DC   E10100EF           SWI      +481
    244              ListMenu_SetCursorToItem(bk->menu_list[indx],menu_pos);
   \   000000E0   2C0099E5           LDR      R0,[R9, #+44]
   \   000000E4   0510A0E1           MOV      R1,R5
   \   000000E8   350100EF           SWI      +309
    245          
    246              GUIObject_SoftKeys_SetAction(bk->menu_list[indx],ACTION_BACK,DestroyMenuList);
   \   000000EC   F4009FE5           LDR      R0,??CreateMenuList_7+0x4  ;; ACTION_BACK
   \   000000F0   F4209FE5           LDR      R2,??CreateMenuList_7+0x8  ;; ??DestroyMenuList
   \   000000F4   001090E5           LDR      R1,[R0, #+0]
   \   000000F8   2C0099E5           LDR      R0,[R9, #+44]
   \   000000FC   0118A0E1           MOV      R1,R1, LSL #+16
   \   00000100   2118A0E1           MOV      R1,R1, LSR #+16
   \   00000104   4B0100EF           SWI      +331
    247              GUIObject_SoftKeys_SetAction(bk->menu_list[indx],ACTION_LONG_BACK,CancelMenuList);
   \   00000108   E0009FE5           LDR      R0,??CreateMenuList_7+0xC  ;; ACTION_LONG_BACK
   \   0000010C   E0209FE5           LDR      R2,??CreateMenuList_7+0x10  ;; ??CancelMenuList
   \   00000110   001090E5           LDR      R1,[R0, #+0]
   \   00000114   2C0099E5           LDR      R0,[R9, #+44]
   \   00000118   0118A0E1           MOV      R1,R1, LSL #+16
   \   0000011C   2118A0E1           MOV      R1,R1, LSR #+16
   \   00000120   4B0100EF           SWI      +331
    248              GUIObject_SoftKeys_SetAction(bk->menu_list[indx],ACTION_SELECT1,Menu_onEnter);
   \   00000124   CC009FE5           LDR      R0,??CreateMenuList_7+0x14  ;; ACTION_SELECT1
   \   00000128   CC209FE5           LDR      R2,??CreateMenuList_7+0x18  ;; ??Menu_onEnter
   \   0000012C   001090E5           LDR      R1,[R0, #+0]
   \   00000130   2C0099E5           LDR      R0,[R9, #+44]
   \   00000134   0118A0E1           MOV      R1,R1, LSL #+16
   \   00000138   2118A0E1           MOV      R1,R1, LSR #+16
   \   0000013C   4B0100EF           SWI      +331
    249          
    250              bk->Menu_oldOnKey[indx] = DispObject_GetOnKey( GUIObject_GetDispObject(bk->menu_list[indx]) );
   \   00000140   2C0099E5           LDR      R0,[R9, #+44]
   \   00000144   680100EF           SWI      +360
   \   00000148   2B0200EF           SWI      +555
   \   0000014C   AC0089E5           STR      R0,[R9, #+172]
    251              DISP_DESC_SetOnKey( DispObject_GetDESC ( GUIObject_GetDispObject(bk->menu_list[indx]) ), Menu_OnKey );
   \   00000150   2C0099E5           LDR      R0,[R9, #+44]
   \   00000154   680100EF           SWI      +360
   \   00000158   1F0200EF           SWI      +543
   \   0000015C   9C109FE5           LDR      R1,??CreateMenuList_7+0x1C  ;; ??Menu_OnKey
   \   00000160   2A0200EF           SWI      +554
    252          
    253              TabMenuBar_SetTabGui(bk->gui,indx,bk->menu_list[indx]);
   \   00000164   2C2099E5           LDR      R2,[R9, #+44]
    254          
    255              TabMenuBar_SetTabIcon(bk->gui,indx,img_menu[SM_BOREDOM_ICN],0);
   \   00000168   ........           LDR      R9,??DataTable10  ;; img_menu
   \   0000016C   280094E5           LDR      R0,[R4, #+40]
   \   00000170   0810A0E1           MOV      R1,R8
   \   00000174   CC0100EF           SWI      +460
   \   00000178   BA21D9E1           LDRH     R2,[R9, #+26]
   \   0000017C   280094E5           LDR      R0,[R4, #+40]
   \   00000180   0030A0E3           MOV      R3,#+0
   \   00000184   0810A0E1           MOV      R1,R8
   \   00000188   CD0100EF           SWI      +461
    256              TabMenuBar_SetTabIcon(bk->gui,indx,img_menu[SM_SMILE_ICN],1);
   \   0000018C   B021D9E1           LDRH     R2,[R9, #+16]
   \   00000190   280094E5           LDR      R0,[R4, #+40]
   \   00000194   0130A0E3           MOV      R3,#+1
   \   00000198   0810A0E1           MOV      R1,R8
   \   0000019C   CD0100EF           SWI      +461
    257            }
   \   000001A0   018088E2           ADD      R8,R8,#+1
   \                     ??CreateMenuList_3:
   \   000001A4   C40097E5           LDR      R0,[R7, #+196]
   \   000001A8   000058E1           CMP      R8,R0
   \   000001AC   B2FFFFBA           BLT      ??CreateMenuList_5
    258            TabMenuBar_SetFocusedTab(bk->gui,tab_pos);
   \                     ??CreateMenuList_4:
   \   000001B0   280094E5           LDR      R0,[R4, #+40]
   \   000001B4   0610A0E1           MOV      R1,R6
   \   000001B8   5E0200EF           SWI      +606
    259            TabMenuBar_SetOnTabSwitch(bk->gui,onTabSwitch);
   \   000001BC   40109FE5           LDR      R1,??CreateMenuList_7+0x20  ;; ??onTabSwitch
   \   000001C0   280094E5           LDR      R0,[R4, #+40]
   \   000001C4   CA0200EF           SWI      +714
    260            BookObj_SetFocus(book,0);
   \   000001C8   0010A0E3           MOV      R1,#+0
   \   000001CC   0400A0E1           MOV      R0,R4
   \   000001D0   320100EF           SWI      +306
    261            GUIObject_Show(bk->gui);
   \   000001D4   280094E5           LDR      R0,[R4, #+40]
   \   000001D8   340100EF           SWI      +308
    262            return(0);
   \   000001DC   0000A0E3           MOV      R0,#+0
   \   000001E0   F083BDE8           POP      {R4-R9,PC}       ;; return
   \                     ??CreateMenuList_7:
   \   000001E4   ........           DC32     ??menu_list_callback
   \   000001E8   ........           DC32     ACTION_BACK
   \   000001EC   ........           DC32     ??DestroyMenuList
   \   000001F0   ........           DC32     ACTION_LONG_BACK
   \   000001F4   ........           DC32     ??CancelMenuList
   \   000001F8   ........           DC32     ACTION_SELECT1
   \   000001FC   ........           DC32     ??Menu_onEnter
   \   00000200   ........           DC32     ??Menu_OnKey
   \   00000204   ........           DC32     ??onTabSwitch
    263          }
    264          

   \                                 In segment CODE, align 4, keep-with-next
    265          int ExitMenuList(void *data, BOOK * book)
    266          {
   \                     ??ExitMenuList:
   \   00000000   F0402DE9           PUSH     {R4-R7,LR}
   \   00000004   0140A0E1           MOV      R4,R1
    267            MyBOOK * bk = (MyBOOK *)book;
    268          
    269            if (bk->stat_list)
   \   00000008   2C0194E5           LDR      R0,[R4, #+300]
   \   0000000C   0050A0E3           MOV      R5,#+0
   \   00000010   000050E3           CMP      R0,#+0
   \   00000014   0100000A           BEQ      ??ExitMenuList_1
    270            {
    271              GUIObject_Destroy( bk->stat_list);
   \   00000018   CE0100EF           SWI      +462
    272              bk->stat_list=0;
   \   0000001C   2C5184E5           STR      R5,[R4, #+300]
    273            }
    274          
    275            for(int i=0; i < MAX_PET_COUNT_GLB; i++)
   \                     ??ExitMenuList_1:
   \   00000020   0060A0E3           MOV      R6,#+0
    276            {
    277              if (bk->menu_list[i])
   \                     ??ExitMenuList_2:
   \   00000024   067184E0           ADD      R7,R4,R6, LSL #+2
   \   00000028   2C0097E5           LDR      R0,[R7, #+44]
   \   0000002C   000050E3           CMP      R0,#+0
   \   00000030   0100000A           BEQ      ??ExitMenuList_3
    278              {
    279                GUIObject_Destroy( bk->menu_list[i]);
   \   00000034   CE0100EF           SWI      +462
    280                bk->menu_list[i]=0;
   \   00000038   2C5087E5           STR      R5,[R7, #+44]
    281              }
    282            }
   \                     ??ExitMenuList_3:
   \   0000003C   016086E2           ADD      R6,R6,#+1
   \   00000040   200056E3           CMP      R6,#+32
   \   00000044   F6FFFFBA           BLT      ??ExitMenuList_2
    283          
    284            if (bk->gui)
   \   00000048   280094E5           LDR      R0,[R4, #+40]
   \   0000004C   000050E3           CMP      R0,#+0
   \   00000050   0500000A           BEQ      ??ExitMenuList_4
    285            {
    286              ActiveTAB = TabMenuBar_GetFocusedTab(bk->gui);
   \   00000054   5D0200EF           SWI      +605
   \   00000058   ........           LDR      R1,??DataTable11  ;; ActiveTAB
   \   0000005C   000081E5           STR      R0,[R1, #+0]
    287              GUIObject_Destroy( bk->gui);
   \   00000060   280094E5           LDR      R0,[R4, #+40]
   \   00000064   CE0100EF           SWI      +462
    288              bk->gui=0;
   \   00000068   285084E5           STR      R5,[R4, #+40]
    289            }
    290          
    291            BookObj_Hide(book,0);
   \                     ??ExitMenuList_4:
   \   0000006C   0010A0E3           MOV      R1,#+0
   \   00000070   0400A0E1           MOV      R0,R4
   \   00000074   710100EF           SWI      +369
    292          
    293            return(0);
   \   00000078   0500A0E1           MOV      R0,R5
   \   0000007C   F080BDE8           POP      {R4-R7,PC}       ;; return
    294          }
    295          

   \                                 In segment DYN_PAGE, align 4, align-sorted
    296          const PAGE_MSG CreateMenu_PageEvents[]@ "DYN_PAGE" ={
   \                     CreateMenu_PageEvents:
   \   00000000   42000000....       DC32 66, ??CreateMenuList, 76, ??CreateMenuList, 67, ??ExitMenuList, 64
   \              ....4C000000
   \              ........4300
   \              0000........
   \              40000000    
   \   0000001C   00000000           DC32 0H
    297            PAGE_ENTER_EVENT_TAG,CreateMenuList,
    298            ACCEPT_EVENT_TAG,CreateMenuList,
    299            PAGE_EXIT_EVENT_TAG,ExitMenuList,
    300            NIL_EVENT_TAG,0
    301          };
    302          

   \                                 In segment DATA_I, align 4, align-sorted
    303          PAGE_DESC CreateMenu_page ={"Tamagochi_CreateMenu_Main_Page",0,CreateMenu_PageEvents};
   \                     CreateMenu_page:
   \   00000000                      DS8 12
   \   0000000C                      REQUIRE `?<Initializer for CreateMenu_page>`
    304          

   \                                 In segment CODE, align 4, keep-with-next
    305          void ShowMenu(BOOK * book)
    306          {
    307            BookObj_CallPage(book,&CreateMenu_page);
   \                     ??ShowMenu:
   \   00000000   08109FE5           LDR      R1,??ShowMenu_1  ;; CreateMenu_page
   \   00000004   00402DE9           PUSH     {LR}
   \   00000008   B80200EF           SWI      +696
    308          }
   \   0000000C   0080BDE8           POP      {PC}             ;; return
   \                     ??ShowMenu_1:
   \   00000010   ........           DC32     CreateMenu_page
    309          

   \                                 In segment CODE, align 4, keep-with-next
    310          void CloseMenu(BOOK * book)
    311          {
    312            ExitMenuList(0,book);
   \                     ??CloseMenu:
   \   00000000   0010A0E1           MOV      R1,R0
   \   00000004   0000A0E3           MOV      R0,#+0
   \   00000008   ........           B        ??ExitMenuList   ;; tailcall
    313          }

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable2:
   \   00000000   ........           DC32     msgShowTime

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   ........           DC32     ??isTamagochiBook

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable9:
   \   00000000   ........           DC32     Pets

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable10:
   \   00000000   ........           DC32     img_menu

   \                                 In segment CODE, align 4, keep-with-next
   \                     ??DataTable11:
   \   00000000   ........           DC32     ActiveTAB

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for ActiveTAB>`:
   \   00000000   00000000           DC32 0
   \                     `?<Initializer for ActivePOS>`:
   \   00000004   00000000           DC32 0
   \                     `?<Initializer for menuprocs>`:
   \   00000008   ............       DC32 ??GamePlay, ??Vaccinate, ??Discipline, ??SleepCommand
   \              ............
   \              ........    
   \   00000018   ............       DC32 ??BatheCommand, ??RoomCommand, ??InfoStatus, ??ChangeName
   \              ............
   \              ........    
   \   00000028   ............       DC32 ??EditConfig, ??AboutDlg
   \              ....        

   \                                 In segment DATA_ID, align 4, align-sorted
   \                     `?<Initializer for CreateMenu_page>`:
   \   00000000   ........0000       DC32 `?<Constant "Tamagochi_CreateMenu_...">`, 0H
   \              0000        
   \   00000008   ........           DC32 CreateMenu_PageEvents

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x47\\x61\\x6d\\x65">`:
   \   00000000   470061006D00       DC8 47H, 0, 61H, 0, 6DH, 0, 65H, 0
   \              6500        
   \   00000008   0000               DC8 0, 0
   \   0000000A   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x56\\x61\\x63\\x63\\x69\\x6e\\x61\\x74\\`:
   \   00000000   560061006300       DC8 56H, 0, 61H, 0, 63H, 0, 63H, 0
   \              6300        
   \   00000008   69006E006100       DC8 69H, 0, 6EH, 0, 61H, 0, 74H, 0
   \              7400        
   \   00000010   65000000           DC8 65H, 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x44\\x69\\x73\\x63\\x69\\x70\\x6c\\x69\\`:
   \   00000000   440069007300       DC8 44H, 0, 69H, 0, 73H, 0, 63H, 0
   \              6300        
   \   00000008   690070006C00       DC8 69H, 0, 70H, 0, 6CH, 0, 69H, 0
   \              6900        
   \   00000010   6E0065000000       DC8 6EH, 0, 65H, 0, 0, 0
   \   00000016   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x42\\x61\\x74\\x68\\x65">`:
   \   00000000   420061007400       DC8 42H, 0, 61H, 0, 74H, 0, 68H, 0
   \              6800        
   \   00000008   65000000           DC8 65H, 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x52\\x6f\\x6f\\x6d\\x20\\x77\\x69\\x74\\`:
   \   00000000   52006F006F00       DC8 52H, 0, 6FH, 0, 6FH, 0, 6DH, 0
   \              6D00        
   \   00000008   200077006900       DC8 20H, 0, 77H, 0, 69H, 0, 74H, 0
   \              7400        
   \   00000010   680020006D00       DC8 68H, 0, 20H, 0, 6DH, 0, 65H, 0
   \              6500        
   \   00000018   61006C000000       DC8 61H, 0, 6CH, 0, 0, 0
   \   0000001E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x53\\x74\\x61\\x74\\x75\\x73">`:
   \   00000000   530074006100       DC8 53H, 0, 74H, 0, 61H, 0, 74H, 0
   \              7400        
   \   00000008   750073000000       DC8 75H, 0, 73H, 0, 0, 0
   \   0000000E   0000               DC8 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x43\\x68\\x61\\x6e\\x67\\x65\\x20\\x6e\\`:
   \   00000000   430068006100       DC8 43H, 0, 68H, 0, 61H, 0, 6EH, 0
   \              6E00        
   \   00000008   670065002000       DC8 67H, 0, 65H, 0, 20H, 0, 6EH, 0
   \              6E00        
   \   00000010   61006D006500       DC8 61H, 0, 6DH, 0, 65H, 0, 0, 0
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x53\\x65\\x74\\x74\\x69\\x6e\\x67">`:
   \   00000000   530065007400       DC8 53H, 0, 65H, 0, 74H, 0, 74H, 0
   \              7400        
   \   00000008   69006E006700       DC8 69H, 0, 6EH, 0, 67H, 0, 0, 0
   \              0000        

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x41\\x62\\x6f\\x75\\x74">`:
   \   00000000   410062006F00       DC8 41H, 0, 62H, 0, 6FH, 0, 75H, 0
   \              7500        
   \   00000008   74000000           DC8 74H, 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "Tamagochi_CreateMenu_...">`:
   \   00000000   54616D61676F       DC8 "Tamagochi_CreateMenu_Main_Page"
   \              6368695F4372
   \              656174654D65
   \              6E755F4D6169
   \              6E5F50616765
   \              00          
   \   0000001F   00                 DC8 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant "BcfgEdit.elf not found!">`:
   \   00000000   426366674564       DC8 "BcfgEdit.elf not found!"
   \              69742E656C66
   \              206E6F742066
   \              6F756E642100

   \                                 In segment DATA_C, align 4, align-sorted
   \   00000000   2F000000           DC8 2FH, 0, 0, 0

   \                                 In segment DATA_C, align 4, align-sorted
   \                     `?<Constant L"\\x54\\x61\\x6d\\x61\\x67\\x6f\\x63\\x68\\`:
   \   00000000   540061006D00       DC8 54H, 0, 61H, 0, 6DH, 0, 61H, 0
   \              6100        
   \   00000008   67006F006300       DC8 67H, 0, 6FH, 0, 63H, 0, 68H, 0
   \              6800        
   \   00000010   69000A007600       DC8 69H, 0, 0AH, 0, 76H, 0, 34H, 0
   \              3400        
   \   00000018   2E0031000A00       DC8 2EH, 0, 31H, 0, 0AH, 0, 0A9H, 0
   \              A900        
   \   00000020   200042006900       DC8 20H, 0, 42H, 0, 69H, 0, 67H, 0
   \              6700        
   \   00000028   480065007200       DC8 48H, 0, 65H, 0, 72H, 0, 63H, 0
   \              6300        
   \   00000030   75006C006500       DC8 75H, 0, 6CH, 0, 65H, 0, 73H, 0
   \              7300        
   \   00000038   200026002000       DC8 20H, 0, 26H, 0, 20H, 0, 50H, 0
   \              5000        
   \   00000040   6C006F006900       DC8 6CH, 0, 6FH, 0, 69H, 0, 6BH, 0
   \              6B00        
   \   00000048   0A000A004F00       DC8 0AH, 0, 0AH, 0, 4FH, 0, 72H, 0
   \              7200        
   \   00000050   690067006900       DC8 69H, 0, 67H, 0, 69H, 0, 6EH, 0
   \              6E00        
   \   00000058   61006C002000       DC8 61H, 0, 6CH, 0, 20H, 0, 69H, 0
   \              6900        
   \   00000060   640065006100       DC8 64H, 0, 65H, 0, 61H, 0, 3AH, 0
   \              3A00        
   \   00000068   200045007200       DC8 20H, 0, 45H, 0, 72H, 0, 61H, 0
   \              6100        
   \   00000070   730065007200       DC8 73H, 0, 65H, 0, 72H, 0, 20H, 0
   \              2000        
   \   00000078   280053006900       DC8 28H, 0, 53H, 0, 69H, 0, 65H, 0
   \              6500        
   \   00000080   6D0065006E00       DC8 6DH, 0, 65H, 0, 6EH, 0, 73H, 0
   \              7300        
   \   00000088   29000000           DC8 29H, 0, 0, 0

   Maximum stack usage in bytes:

     Function                       CSTACK
     --------                       ------
     AboutDlg(int, BOOK *, int)        16
     CancelMenuList(BOOK *, GUI *)     12
     CloseMenu(BOOK *)                  4
     CreateMenuList(void *, BOOK *)    28
     DestroyMenuList(BOOK *, GUI *)     4
     EditConfig(int, BOOK *, int)     684
     ExitMenuList(void *, BOOK *)      20
     Menu_OnKey(DISP_OBJ *, int, int, int, int)
                                       36
     Menu_onEnter(BOOK *, GUI *)       20
     RoomCommand(int, BOOK *, int)    528
     ShowMenu(BOOK *)                   4
     isAnyDeath()                       0
     menu_list_callback(GUI_MESSAGE *)
                                       28
     onTabSwitch(BOOK *, int)           0


   Segment part sizes:

     Function/Label                 Bytes
     --------------                 -----
     EditConfig(int, BOOK *, int)    292
     CountAbout                        4
     isAnyDeath()                     64
     AboutDlg(int, BOOK *, int)       88
     RoomCommand(int, BOOK *, int)   180
     menuiconsnum                    108
     ActiveTAB                        48
     menu_list_callback(GUI_MESSAGE *)
                                     204
     DestroyMenuList(BOOK *, GUI *)   24
     CancelMenuList(BOOK *, GUI *)    48
     Menu_onEnter(BOOK *, GUI *)     132
     Menu_OnKey(DISP_OBJ *, int, int, int, int)
                                     228
     onTabSwitch(BOOK *, int)         12
     CreateMenuList(void *, BOOK *)  520
     ExitMenuList(void *, BOOK *)    128
     CreateMenu_PageEvents            32
     CreateMenu_page                  12
     ShowMenu(BOOK *)                 20
     CloseMenu(BOOK *)                12
     ??DataTable2                      4
     ??DataTable6                      4
     ??DataTable9                      4
     ??DataTable10                     4
     ??DataTable11                     4
     ?<Initializer for ActiveTAB>     48
     ?<Initializer for CreateMenu_page>
                                      12
     ?<Constant L"\x47\x61\x6d\x65">
                                      12
     ?<Constant L"\x56\x61\x63\x63\x69\x6e\x61\x74\
                                      20
     ?<Constant L"\x44\x69\x73\x63\x69\x70\x6c\x69\
                                      24
     ?<Constant L"\x42\x61\x74\x68\x65">
                                      12
     ?<Constant L"\x52\x6f\x6f\x6d\x20\x77\x69\x74\
                                      32
     ?<Constant L"\x53\x74\x61\x74\x75\x73">
                                      16
     ?<Constant L"\x43\x68\x61\x6e\x67\x65\x20\x6e\
                                      24
     ?<Constant L"\x53\x65\x74\x74\x69\x6e\x67">
                                      16
     ?<Constant L"\x41\x62\x6f\x75\x74">
                                      12
     ?<Constant "Tamagochi_CreateMenu_...">
                                      32
     ?<Constant "BcfgEdit.elf not found!">
                                      24
     ?<Constant L"\x2f">               4
     ?<Constant L"\x54\x61\x6d\x61\x67\x6f\x63\x68\
                                     140
      Others                         104

 
 2 052 bytes in segment CODE
   476 bytes in segment DATA_C
    60 bytes in segment DATA_I
    60 bytes in segment DATA_ID
     4 bytes in segment DATA_Z
    32 bytes in segment DYN_PAGE
    24 bytes in segment INITTAB
 
 1 972 bytes of CODE  memory (+ 104 bytes shared)
   568 bytes of CONST memory
    64 bytes of DATA  memory

Errors: none
Warnings: none
